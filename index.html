<!DOCTYPE HTML>
<html>
	<head></head>
	<body>
<!-- we are switching to full html version in dev version and user version -->
<script src="https://cdn.jsdelivr.net/npm/eruda"></script>
<script src="script.js"><script>
<script>eruda.init();</script>

<script>
  var codeRoot = document.createElement('div');
  var codeTitle = document.createElement('h2');
  var codeHint = document.createElement('p');
  var codeBlock = document.createElement('textarea');
  var runButton = document.createElement('button');
  var outputFrame = document.createElement('iframe');

  // Setup UI
  codeTitle.textContent = "Welcome to Code Practice";
  codeHint.textContent = "Type some JavaScript below and click Run! üë©‚Äçüíªüë®‚Äçüíª";
  codeBlock.placeholder = "console.log('Hello World')";
  codeBlock.style.width = "80%";
  codeBlock.style.height = "200px";
  codeBlock.style.display = "block";
  codeBlock.style.margin = "20px auto";
  codeBlock.style.fontFamily = "monospace";
  codeBlock.style.fontSize = "16px";

  runButton.textContent = "‚ñ∂ Run Code";
  runButton.style.display = "block";
  runButton.style.margin = "10px auto";
  runButton.style.padding = "10px 20px";
  runButton.style.fontSize = "18px";
  runButton.style.cursor = "pointer";

  outputFrame.style.width = "90%";
  outputFrame.style.height = "300px";
  outputFrame.style.display = "block";
  outputFrame.style.margin = "20px auto";
  outputFrame.style.border = "2px solid #ccc";

  // Add elements
  codeRoot.appendChild(codeTitle);
  codeRoot.appendChild(codeHint);
  codeRoot.appendChild(codeBlock);
  codeRoot.appendChild(runButton);
  codeRoot.appendChild(outputFrame);
  document.body.appendChild(codeRoot);

  // Run code inside iframe
  runButton.addEventListener('click', function () {
    var userCode = codeBlock.value;
			if(userCode == '183115428') goldenbody();
    var iframeDoc = outputFrame.contentDocument || outputFrame.contentWindow.document;

    iframeDoc.open();
    iframeDoc.write(`
      <!DOCTYPE html>
      <html>
        <head><style>body { font-family: monospace; padding: 10px; }</style></head>
        <body>
          <script>
            try {
              console.log = function(msg) {
                var div = document.createElement('div');
                div.textContent = msg;
                document.body.appendChild(div);
              };
              ${userCode}
            } catch (err) {
              document.body.innerHTML += '<div style="color:red;">Error: ' + err + '</div>';
            }
          <\/script>
        </body>
      </html>
    `);
    iframeDoc.close();
  });
</script>
<script>
		function goldenbody() {
			wind = window.open("", "_blank");
			wind.document.write('<iframe src="flowaway-goldenbody.github.io/app.html"></iframe>');
			wind.document.close();
		}
</script>
		</body>
</html>
